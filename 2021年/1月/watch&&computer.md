# watchåŸç†

> å½“ç›‘å¬çŠ¶æ€å‘ç”Ÿæ”¹å˜å°±ä¼šè§¦å‘ã€‚
>
> watchåœ¨å·¥ä½œä¸­ç”¨çš„è¿˜æ˜¯æŒºå¤šçš„ï¼Œä½†æ˜¯åŸç†è¿˜æ˜¯ä¸æ€ä¹ˆæ¸…æ¥šï¼Œç°åœ¨å°±æ¥å¥½å¥½ç†è§£ä¸€ä¸‹å§ï¼
>
> ç”¨æ³•
>
> ```jsx
> 
> watch: {
> // ç¬¬ä¸€ç§æ–¹å¼
>  watchProps(newVal, oldVal) {
>    this.xx = "111";
>    // dosomething
>  },
> // ç¬¬äºŒç§æ–¹å¼ï¼Œå¯ä»¥å…¼å®¹ 'watchProps.xx.yy' ä»¥å‰ä¸æ‡‚çš„æ—¶å€™ä¸€ç›´é€šè¿‡ computer æŠŠå±æ€§è¿”å›å‡ºæ¥ 
> // çœ‹äº†åŒäº‹ä»£ç æ‰å¹¡ç„¶é†’æ‚Ÿã€‚ğŸ˜­ğŸ˜­
>  'watchProps':{
>    handler(newVal, oldVal) {
>        this.xx = "111";
>    		// dosomething
>    },
>     immediate: true, // ç«‹å³ç›‘å¬
>     	deep:true // æ·±åº¦ç›‘å¬
>  }
> } 
> // ç¬¬ä¸‰ç§æ–¹å¼ ,var vm = new Vue({})
> vm.$watch('a.b.c',(newVal,oldVal)=>{
>   	// dosomething
> },{
>   deep:true,
>   immediate:truem
> })
> 
> deep,immediate éå¿…ä¼ ã€‚
> 
> è¿˜å¯ä»¥ä¸»åŠ¨å–æ¶ˆè§‚å¯Ÿå‡½æ•° watcher.teardown()
> ```

##### é¡ºä¾¿åŒºåˆ†ä¸€ä¸‹watch å’Œ computerçš„ç”¨æ³•ä»¥åŠåœºæ™¯

computer è®¡ç®—å±æ€§ å½“å±æ€§çš„ä¾èµ–æœ‰å‘ç”Ÿå˜åŒ–å°±ä¼šè§¦å‘ï¼Œ

åœºæ™¯ï¼š1.è´­ç‰©è½¦è®¡ç®—çš„æ€»é‡‘é¢ å¤šä¸ªçŠ¶æ€å½±å“ä¸€ä¸ªè®¡ç®—å±æ€§ï¼ˆå¤šå¯¹ä¸€ï¼‰ã€‚

â€‹			2.æ¨¡ç‰ˆæ¸²æŸ“çš„çŠ¶æ€éœ€è¦æ¯”è¾ƒå¤æ‚çš„è®¡ç®—ã€‚

watch ç›‘å¬å™¨ï¼Œå®ƒå°±æ˜¯ç›‘å¬ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œåªè¦å˜åŒ–å°±ä¼šè§¦å‘ã€‚

åœºæ™¯ï¼š1.è´·æ¬¾æœˆä¾› ï¼Œå½“é€‰æ‹©è¿˜æ¬¾å¹´é™ï¼Œè®¡ç®—å…¶ä»–çš„æ•°å€¼å¹¶èµ‹å€¼ï¼ˆå½“çŠ¶æ€å˜åŒ–ï¼Œè§¦å‘å…¶ä»–æ•°å€¼çš„å˜åŒ–ï¼Œä¸€å¯¹å¤šï¼‰ã€‚

â€‹			2.å½“ç»„ä»¶ä¼ å€¼ï¼Œç›‘å¬çŠ¶æ€åšä¸€äº›ç›¸åº”çš„æ“ä½œã€‚

ç»¼ä¸Šæ‰€è¿°ï¼š`computed` é€‚ç”¨ä¸€ä¸ªæ•°æ®è¢«å¤šä¸ªæ•°æ®å½±å“ï¼Œè€Œ `watch` é€‚ç”¨ä¸€ä¸ªæ•°æ®å½±å“å¤šä¸ªæ•°æ®ã€‚



## åŸç†

åœ¨åŒå‘æ•°æ®ç»‘å®šçš„æ—¶å€™ æœ‰ä¸€ä¸ªWatcherç±»ï¼Œåªæ˜¯å½“æ—¶æ²¡æœ‰deepï¼Œimmediateå‚æ•°ï¼Œåªéœ€è¦åŠ ä¸Šåˆ¤æ–­ï¼Œå³å¯ï¼Œ

è¿˜æœ‰å¯ä»¥ç›‘å¬å‡½æ•°ï¼Œå°†å½“å‰å‡½æ•°èµ‹å€¼ç»™getterï¼Œè¿™å°±å¯ä»¥äº†,ç›‘å¬çš„å‡½æ•°é‡Œé¢æ¶‰åŠåˆ°çš„çŠ¶æ€éƒ½ä¼šè¢«ç›‘å¬åˆ°ï¼Œå‘ç”Ÿäº†å˜åŒ–å°±ä¼šè§¦å‘watchã€‚

è¿˜è¦æ–°å¢ä¸€ä¸ªå–æ¶ˆè§‚å¯Ÿå‡½æ•°çš„å‡½æ•°ã€‚



## computer

> **è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„**ã€‚åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ï¼Œè€Œ `watch` åˆ™æ˜¯å½“æ•°æ®å‘ç”Ÿå˜åŒ–ä¾¿ä¼šè°ƒç”¨æ‰§è¡Œå‡½æ•°
>
> `computed` æ˜¯è®¡ç®—ä¸€ä¸ªæ–°çš„å±æ€§ï¼Œå¹¶å°†è¯¥å±æ€§æŒ‚è½½åˆ° vmï¼ˆVue å®ä¾‹ï¼‰ä¸Šï¼Œè€Œ `watch` æ˜¯ç›‘å¬å·²ç»å­˜åœ¨ä¸”å·²æŒ‚è½½åˆ° `vm` ä¸Šçš„æ•°æ®ï¼Œæ‰€ä»¥ç”¨ `watch` åŒæ ·å¯ä»¥ç›‘å¬ `computed` è®¡ç®—å±æ€§çš„å˜åŒ–ï¼ˆå…¶å®ƒè¿˜æœ‰ `data`ã€`props`ï¼‰ã€‚
>
> 



åŸç†æ˜¯ï¼Œé€šè¿‡ Object.definePropertyï¼Œè¿›è¡Œç»‘å®šï¼Œå½“å“åº”çš„æ•°æ®æ²¡æœ‰å˜åŒ–å°±ä¸å˜åŒ–ï¼Œå’ŒåŒå‘æ•°æ®ç»‘å®šå·®ä¸å¤šã€‚

#### computerçš„ä½¿ç”¨æ–¹å¼

```js
1.è®¡ç®—å±æ€§çš„getterå‡½æ•°
2.è®¡ç®—å±æ€§çš„setterå‡½æ•°
3.è®¡ç®—å±æ€§çš„cacheç¼“å­˜å±æ€§

 computed: {
	  changeMessage: {
	   // è®¡ç®—å±æ€§ï¼šä¾èµ–messageå˜åŒ–è€Œå˜åŒ–  ä¾èµ–æ²¡å˜åŒ–å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼›
	   get () {
	      return this.message + 'world'
	   },
	   set () { 
       // å½“èµ‹å€¼ç»™è®¡ç®—å±æ€§çš„æ—¶å€™ï¼Œå°†è°ƒç”¨setterå‡½æ•°ã€‚å¤šç”¨äºåœ¨æ¨¡æ¿ç»„ä»¶ä¸­éœ€è¦ä¿®æ”¹è®¡ç®—å±æ€§è‡ªèº«çš„å€¼çš„æ—¶å€™ã€‚åœ¨mountä¸­ä¿®æ”¹
	   }
	 }
	}

// é»˜è®¤è°ƒç”¨çš„æ˜¯get
computed: {
   reversedMsg() {
     // this æŒ‡å‘ vm å®ä¾‹
     return this.msg.split('').reverse().join('')
   }
 }
```

